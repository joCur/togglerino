# Tailwind CSS + shadcn/ui Migration Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Replace all inline `style={{}}` objects and JS hover/focus handlers with Tailwind CSS utility classes and shadcn/ui components.

**Architecture:** Install Tailwind CSS v4 (Vite plugin) and shadcn/ui into the existing React + Vite app. Migrate files incrementally: config first, then shared layouts, then pages. Each migrated file removes its `import { t } from '../theme.ts'` and replaces inline styles with Tailwind classes + shadcn components.

**Tech Stack:** Tailwind CSS v4, shadcn/ui (Radix UI primitives), class-variance-authority, clsx, tailwind-merge, lucide-react, tw-animate-css

---

## File Inventory

**No changes needed:**
- `web/src/api/client.ts` — pure logic
- `web/src/api/types.ts` — TypeScript types
- `web/src/hooks/useAuth.ts` — pure logic

**Config changes:**
- `web/vite.config.ts` — add tailwind plugin + `@` path alias
- `web/tsconfig.json` — add `baseUrl` + `paths`
- `web/tsconfig.app.json` — add `baseUrl` + `paths`
- `web/index.html` — add `class="dark"` to `<html>` tag
- `web/src/index.css` — replace with tailwind imports + theme variables
- `web/src/App.css` — delete (empty file)
- `web/src/theme.ts` — delete after all files migrated

**New files:**
- `web/components.json` — shadcn config
- `web/src/lib/utils.ts` — `cn()` helper
- `web/src/components/ui/*.tsx` — generated by shadcn CLI

**Files to migrate (22 total):**
- `web/src/App.tsx`
- `web/src/main.tsx` (tiny — just remove App.css import)
- 9 components in `web/src/components/`
- 12 pages in `web/src/pages/`

---

### Task 1: Install Tailwind CSS v4 and configure Vite

**Files:**
- Modify: `web/package.json` (via npm install)
- Modify: `web/vite.config.ts`

**Step 1: Install tailwind and vite plugin**

```bash
cd web && npm install tailwindcss @tailwindcss/vite
```

**Step 2: Update vite.config.ts**

Replace `web/vite.config.ts` with:

```typescript
import path from 'path'
import { defineConfig } from 'vite'
import tailwindcss from '@tailwindcss/vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react(), tailwindcss()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8090',
        changeOrigin: true,
      },
    },
  },
})
```

Note: `@types/node` is already a devDependency.

**Step 3: Verify the dev server starts**

```bash
cd web && npx vite --clearScreen false 2>&1 | head -20
```

Expected: Vite dev server starts without errors.

**Step 4: Commit**

```
feat(web): add Tailwind CSS v4 with Vite plugin
```

---

### Task 2: Configure TypeScript path aliases

**Files:**
- Modify: `web/tsconfig.json`
- Modify: `web/tsconfig.app.json`

**Step 1: Update tsconfig.json**

Add `compilerOptions` with `baseUrl` and `paths`:

```json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

**Step 2: Update tsconfig.app.json**

Add `baseUrl` and `paths` to existing `compilerOptions`:

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    // ... keep all existing options
  }
}
```

**Step 3: Verify TypeScript is happy**

```bash
cd web && npx tsc --noEmit 2>&1 | head -20
```

Expected: No new errors.

**Step 4: Commit**

```
chore(web): add @ path alias for TypeScript
```

---

### Task 3: Initialize shadcn/ui

**Files:**
- Create: `web/components.json`
- Create: `web/src/lib/utils.ts`
- Modify: `web/src/index.css`
- Modify: `web/index.html`
- Modify: `web/package.json` (via npm install)

**Step 1: Install shadcn dependencies manually**

The interactive CLI can be unreliable in automation. Install deps directly:

```bash
cd web && npm install class-variance-authority clsx tailwind-merge lucide-react tw-animate-css
```

**Step 2: Create components.json**

Create `web/components.json`:

```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "src/index.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}
```

**Step 3: Create cn() utility**

Create `web/src/lib/utils.ts`:

```typescript
import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

**Step 4: Replace index.css with Tailwind + shadcn theme**

Replace `web/src/index.css` with the dark-theme CSS variables. Since the app is always dark mode, we define dark values in `:root` directly (no light/dark toggle needed). Map the existing Ink & Ember palette into shadcn's variable scheme:

```css
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --font-sans: 'Sora', sans-serif;
  --font-mono: 'Fira Code', monospace;
}

/*
 * Dark-only app — define dark values directly in :root.
 * Based on shadcn neutral palette with warm accent adjustments.
 */
:root {
  --radius: 0.625rem;
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.178 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.178 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --destructive-foreground: oklch(0.985 0 0);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Sora', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    line-height: 1.5;
    min-height: 100vh;
  }
}

/* ── Noise grain overlay ── */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 10000;
  opacity: 0.018;
  mix-blend-mode: overlay;
  background: repeating-conic-gradient(#808080 0.00011%, transparent 0.00015%) 50% 50% / 2500px 2500px;
}

/* ── Custom scrollbar ── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.06);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.12);
}

/* ── Selection ── */
::selection {
  background: rgba(212, 149, 106, 0.25);
  color: #fff;
}

/* ── Animations ── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes shimmer {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
@keyframes modalIn {
  from { opacity: 0; transform: scale(0.97) translateY(4px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes overlayIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ── Range slider ── */
input[type='range'] {
  -webkit-appearance: none;
  appearance: none;
  height: 4px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 2px;
  outline: none;
}
input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #d4956a;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 8px rgba(212, 149, 106, 0.3);
  transition: box-shadow 200ms ease;
}
input[type='range']::-webkit-slider-thumb:hover {
  box-shadow: 0 0 16px rgba(212, 149, 106, 0.5);
}
input[type='range']::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #d4956a;
  cursor: pointer;
  border: none;
}

/* ── Checkbox ── */
input[type='checkbox'] {
  accent-color: #d4956a;
}

/* ── Placeholder ── */
::placeholder {
  color: rgba(255, 255, 255, 0.18);
}

/* ── Option styling ── */
option {
  background: #111114;
  color: #e4e4e8;
}
```

**Step 5: Add dark class to HTML**

In `web/index.html`, change `<html lang="en">` to `<html lang="en" class="dark">`.

**Step 6: Delete App.css**

Delete `web/src/App.css` (empty file).

**Step 7: Remove App.css import from main.tsx**

In `web/src/main.tsx`, the file only imports `index.css` (no `App.css` import). No change needed.

**Step 8: Verify dev server still works**

```bash
cd web && npx vite --clearScreen false 2>&1 | head -20
```

Expected: Starts without errors. The app will still work because existing inline styles don't conflict with Tailwind.

**Step 9: Commit**

```
feat(web): initialize shadcn/ui with dark theme CSS variables
```

---

### Task 4: Add shadcn/ui components

**Files:**
- Create: `web/src/components/ui/button.tsx`
- Create: `web/src/components/ui/input.tsx`
- Create: `web/src/components/ui/label.tsx`
- Create: `web/src/components/ui/card.tsx`
- Create: `web/src/components/ui/badge.tsx`
- Create: `web/src/components/ui/table.tsx`
- Create: `web/src/components/ui/tabs.tsx`
- Create: `web/src/components/ui/select.tsx`
- Create: `web/src/components/ui/dialog.tsx`
- Create: `web/src/components/ui/alert.tsx`
- Create: `web/src/components/ui/checkbox.tsx`
- Create: `web/src/components/ui/slider.tsx`
- Create: `web/src/components/ui/separator.tsx`
- Create: `web/src/components/ui/dropdown-menu.tsx`
- Create: `web/src/components/ui/sonner.tsx`
- Create: `web/src/components/ui/textarea.tsx`
- Create: `web/src/components/ui/switch.tsx`

**Step 1: Install sonner (toast library)**

```bash
cd web && npm install sonner
```

**Step 2: Add all shadcn components via CLI**

```bash
cd web && npx shadcn@latest add button input label card badge table tabs select dialog alert checkbox slider separator dropdown-menu sonner textarea switch --yes --overwrite
```

The `--yes` flag skips confirmation prompts. This creates all component files in `web/src/components/ui/`.

**Step 3: Verify components were created**

```bash
ls web/src/components/ui/
```

Expected: All component files listed above.

**Step 4: Verify TypeScript compiles**

```bash
cd web && npx tsc --noEmit 2>&1 | head -20
```

Expected: No errors.

**Step 5: Commit**

```
feat(web): add shadcn/ui components
```

---

### Task 5: Migrate App.tsx and main.tsx

**Files:**
- Modify: `web/src/App.tsx`
- Modify: `web/src/main.tsx`

**Step 1: Migrate App.tsx**

Remove the `import { t } from './theme.ts'` and replace inline styles with Tailwind classes. The loading spinner in `AuthRouter` uses inline styles — convert to Tailwind:

```tsx
// Before:
<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', backgroundColor: t.bgBase, ... }}>

// After:
<div className="flex items-center justify-center h-screen text-muted-foreground text-sm tracking-wide">
```

The toggle logo SVG accent color `t.accent` should use `currentColor` with a className, or use the raw hex `#d4956a` since it's a brand color in SVG.

**Step 2: Verify dev server renders the loading state**

```bash
cd web && npx vite --clearScreen false 2>&1 | head -20
```

**Step 3: Commit**

```
refactor(web): migrate App.tsx to Tailwind classes
```

---

### Task 6: Migrate layout components (Topbar, OrgLayout, ProjectLayout)

**Files:**
- Modify: `web/src/components/Topbar.tsx`
- Modify: `web/src/components/OrgLayout.tsx`
- Modify: `web/src/components/ProjectLayout.tsx`

These three files share the same patterns: sidebar navigation, topbar, layout flex containers. They all import `t` from theme.ts.

**Migration patterns for these files:**

| Inline style | Tailwind class |
|---|---|
| `display: 'flex'` | `flex` |
| `alignItems: 'center'` | `items-center` |
| `justifyContent: 'space-between'` | `justify-between` |
| `padding: '0 24px'` | `px-6` |
| `height: 52` | `h-[52px]` |
| `backgroundColor: t.bgSurface` | `bg-card` |
| `borderBottom: '1px solid ...'` | `border-b` |
| `color: t.textPrimary` | `text-foreground` |
| `color: t.textSecondary` | `text-muted-foreground` |
| `color: t.textMuted` | `text-muted-foreground/60` |
| `color: t.accent` | `text-[#d4956a]` |
| `fontSize: 13` | `text-[13px]` |
| `fontFamily: t.fontMono` | `font-mono` |
| `fontFamily: t.fontSans` | `font-sans` |
| `transition: 'all 200ms ease'` | `transition-all duration-200` |
| `onMouseEnter/onMouseLeave` for hover | `hover:` prefix |

**For NavLink active styles**, use React Router's `className` callback:

```tsx
<NavLink
  to="/projects"
  end
  className={({ isActive }) =>
    cn(
      'flex items-center gap-2.5 px-5 py-2 text-[13px] border-l-2 transition-all duration-200',
      isActive
        ? 'font-medium text-foreground border-[#d4956a] bg-[#d4956a]/8'
        : 'font-normal text-muted-foreground border-transparent hover:text-foreground hover:bg-white/[0.03]'
    )
  }
>
```

**For Topbar logout button**, use the shadcn `Button` component:

```tsx
import { Button } from '@/components/ui/button'

<Button variant="outline" size="sm" onClick={handleLogout}>
  Log out
</Button>
```

**Step 1:** Migrate `Topbar.tsx` — remove `import { t }`, convert all inline styles to Tailwind, replace button with shadcn Button, remove all `onMouseEnter`/`onMouseLeave` handlers.

**Step 2:** Migrate `OrgLayout.tsx` — convert sidebar + main layout to Tailwind flex, convert NavLink styles to className callback.

**Step 3:** Migrate `ProjectLayout.tsx` — same pattern as OrgLayout with project-specific nav items.

**Step 4: Verify layouts render**

Start dev server and check that the topbar, sidebar, and main content area render correctly.

**Step 5: Commit**

```
refactor(web): migrate layout components to Tailwind + shadcn
```

---

### Task 7: Migrate ProjectSwitcher

**Files:**
- Modify: `web/src/components/ProjectSwitcher.tsx`

This is the dropdown project selector in the topbar. Currently a custom implementation with `useRef`, `useEffect` for outside-click, and manual dropdown positioning.

**Option A (simpler):** Keep the custom dropdown logic but convert styles to Tailwind.

**Option B:** Replace with shadcn `DropdownMenu` or `Popover` + `Command` for a searchable combobox.

**Go with Option A** for now — it works and just needs Tailwind classes. The custom logic (outside click, search filter) stays.

Key conversions:
- The separator `/` span: `text-muted-foreground/60 text-lg font-light mr-3 select-none`
- The trigger button: `flex items-center gap-2 px-2.5 py-1.5 text-[13px] font-medium text-foreground bg-transparent border border-transparent rounded-md cursor-pointer transition-all duration-200 hover:bg-white/[0.04]` (when closed); add `bg-[#1a1a1f] border-white/10` when open
- The dropdown container: `absolute top-full left-0 mt-1.5 w-[260px] bg-card border border-white/10 rounded-lg shadow-[0_8px_30px_rgba(0,0,0,0.4)] z-[100] overflow-hidden`
- Each project item: `flex flex-col gap-0.5 w-full px-2.5 py-2 text-[13px] text-foreground bg-transparent border-none rounded-md cursor-pointer text-left transition-colors duration-150 hover:bg-white/[0.04]`

Remove all `onMouseEnter`/`onMouseLeave` handlers — use `hover:` prefix instead.

**Step 1:** Convert all inline styles to Tailwind classes. Remove `import { t }`.

**Step 2:** Verify dropdown opens/closes, search filters work.

**Step 3: Commit**

```
refactor(web): migrate ProjectSwitcher to Tailwind
```

---

### Task 8: Migrate modal components (CreateProjectModal, CreateFlagModal)

**Files:**
- Modify: `web/src/components/CreateProjectModal.tsx`
- Modify: `web/src/components/CreateFlagModal.tsx`

Replace custom modal overlay/panel with shadcn `Dialog`. Replace custom inputs/labels/buttons with shadcn components.

**Pattern for Dialog migration:**

```tsx
// Before: custom modal with open/onClose props, overlay div, panel div
if (!open) return null
return (
  <div style={{ position: 'fixed', inset: 0, ... }} onClick={resetAndClose}>
    <div style={{ ... }} onClick={e => e.stopPropagation()}>
      ...
    </div>
  </div>
)

// After: shadcn Dialog
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'

return (
  <Dialog open={open} onOpenChange={(isOpen) => { if (!isOpen) resetAndClose() }}>
    <DialogContent className="sm:max-w-[460px]">
      <DialogHeader>
        <DialogTitle>Create Project</DialogTitle>
      </DialogHeader>
      <form onSubmit={handleSubmit}>
        ...
        <div className="flex justify-end gap-2.5 mt-4">
          <Button type="button" variant="outline" onClick={resetAndClose}>Cancel</Button>
          <Button type="submit" disabled={mutation.isPending}>
            {mutation.isPending ? 'Creating...' : 'Create Project'}
          </Button>
        </div>
      </form>
    </DialogContent>
  </Dialog>
)
```

**For inputs:**

```tsx
// Before: custom inputStyle object + onFocus/onBlur handlers
<input style={inputStyle} onFocus={handleFocus} onBlur={handleBlur} ... />

// After: shadcn Input (has focus ring built-in via CSS)
<Input value={name} onChange={e => handleNameChange(e.target.value)} placeholder="My Project" required autoFocus />
```

**For labels:**

```tsx
// Before: <label style={{ display: 'block', fontSize: 12, ... }}>
// After: <Label>Name</Label>
```

**For the boolean toggle in CreateFlagModal**, replace the custom toggle div with shadcn `Switch`:

```tsx
import { Switch } from '@/components/ui/switch'

<Switch checked={boolValue} onCheckedChange={setBoolValue} />
```

**Step 1:** Migrate `CreateProjectModal.tsx`. Remove all inline styles, focus/blur handlers, custom overlay. Use Dialog + Input + Label + Button + Textarea.

**Step 2:** Migrate `CreateFlagModal.tsx`. Same pattern, plus use Select for flag type, Switch for boolean toggle.

**Step 3:** Verify both modals open, form submission works, error display works.

**Step 4: Commit**

```
refactor(web): migrate modal components to shadcn Dialog
```

---

### Task 9: Migrate RolloutSlider, VariantEditor, RuleBuilder

**Files:**
- Modify: `web/src/components/RolloutSlider.tsx`
- Modify: `web/src/components/VariantEditor.tsx`
- Modify: `web/src/components/RuleBuilder.tsx`

These are the most complex components — the flag configuration UI.

**RolloutSlider:** Simple — convert inline styles to Tailwind. Keep the native `input[type='range']` (CSS in index.css already styles it). Use shadcn Checkbox.

**VariantEditor:** Convert the table-like layout to Tailwind flex. Replace buttons with shadcn Button. Remove all focus/blur handlers.

**RuleBuilder:** The most intricate. Each rule has conditions (attribute/operator/value rows), a variant selector, and a rollout slider. Convert all inline styles to Tailwind. Use shadcn Button for add/remove. Keep native `<select>` for operator dropdowns (optgroups aren't supported by Radix Select).

**Key pattern — remove all onFocus/onBlur handlers:**

```tsx
// Before:
<input style={inputStyle}
  onFocus={(e) => { e.currentTarget.style.borderColor = t.accentBorder }}
  onBlur={(e) => { e.currentTarget.style.borderColor = t.border }}
/>

// After (using shadcn Input or Tailwind classes):
<Input className="flex-1" ... />
// OR for native elements that can't use Input:
<input className="flex-1 px-2.5 py-1.5 text-xs border rounded-md bg-input text-foreground outline-none transition-colors focus:border-ring focus:ring-2 focus:ring-ring/30" ... />
```

**Step 1:** Migrate `RolloutSlider.tsx`.

**Step 2:** Migrate `VariantEditor.tsx`.

**Step 3:** Migrate `RuleBuilder.tsx`.

**Step 4:** Verify flag detail page — environment config editor, variant editor, rule builder all render and function correctly.

**Step 5: Commit**

```
refactor(web): migrate flag config components to Tailwind + shadcn
```

---

### Task 10: Migrate auth pages (LoginPage, SetupPage, AcceptInvitePage, ResetPasswordPage)

**Files:**
- Modify: `web/src/pages/LoginPage.tsx`
- Modify: `web/src/pages/SetupPage.tsx`
- Modify: `web/src/pages/AcceptInvitePage.tsx`
- Modify: `web/src/pages/ResetPasswordPage.tsx`

All four share nearly identical structure: centered card, brand header, form with inputs, submit button. They share the same visual patterns.

**Pattern:**

```tsx
// Outer wrapper — centered fullscreen
<div className="flex items-center justify-center min-h-screen bg-background bg-[radial-gradient(ellipse_60%_50%_at_50%_40%,rgba(212,149,106,0.04)_0%,transparent_70%)]">

  // Card
  <div className="w-full max-w-[400px] p-10 rounded-2xl bg-card border shadow-[0_8px_40px_rgba(0,0,0,0.4)] animate-[fadeInUp_400ms_ease]">

    // Brand logo (same across all 4 pages)
    <div className="flex items-center justify-center gap-2.5 mb-2">
      <svg ...>...</svg>
      <span className="font-mono text-lg font-semibold text-[#d4956a] tracking-wide">togglerino</span>
    </div>
    <div className="text-[13px] text-muted-foreground text-center mb-9">
      Sign in to your account
    </div>

    // Error display
    {displayError && (
      <Alert variant="destructive" className="mb-5">
        <AlertDescription>{displayError}</AlertDescription>
      </Alert>
    )}

    // Form fields
    <Label>Email</Label>
    <Input type="email" ... className="mb-4" />

    // Submit button
    <Button className="w-full" disabled={submitting}>
      {submitting ? 'Signing In...' : 'Sign In'}
    </Button>
  </div>
</div>
```

**Step 1:** Migrate `LoginPage.tsx`.

**Step 2:** Migrate `SetupPage.tsx` — same as login but with confirm password field.

**Step 3:** Migrate `AcceptInvitePage.tsx` — same pattern with success state.

**Step 4:** Migrate `ResetPasswordPage.tsx` — same pattern with success state.

**Step 5:** Verify login flow works end to end (if backend is running).

**Step 6: Commit**

```
refactor(web): migrate auth pages to Tailwind + shadcn
```

---

### Task 11: Migrate ProjectsPage

**Files:**
- Modify: `web/src/pages/ProjectsPage.tsx`

Converts the project grid cards + "Create Project" button.

**Pattern for page header:**

```tsx
<div className="flex items-center justify-between mb-8">
  <h1 className="text-[22px] font-semibold text-foreground tracking-tight">Projects</h1>
  <Button onClick={() => setModalOpen(true)}>Create Project</Button>
</div>
```

**Pattern for project cards:**

```tsx
<div className="grid grid-cols-[repeat(auto-fill,minmax(300px,1fr))] gap-4">
  {projects.map((project, index) => (
    <Card
      key={project.id}
      className="cursor-pointer transition-all duration-300 hover:border-[#d4956a]/25 hover:shadow-[0_0_24px_rgba(212,149,106,0.15)] hover:-translate-y-0.5 animate-[fadeIn_300ms_ease_both]"
      style={{ animationDelay: `${index * 50}ms` }}
      onClick={() => navigate(`/projects/${project.key}`)}
    >
      <CardContent className="p-6">
        <div className="text-[15px] font-semibold text-foreground mb-1">{project.name}</div>
        <div className="text-xs font-mono text-[#d4956a] mb-2.5 tracking-wide">{project.key}</div>
        ...
      </CardContent>
    </Card>
  ))}
</div>
```

**Step 1:** Convert ProjectsPage to Tailwind + Card + Button. Remove `import { t }`.

**Step 2: Commit**

```
refactor(web): migrate ProjectsPage to Tailwind + shadcn
```

---

### Task 12: Migrate ProjectDetailPage (flag table)

**Files:**
- Modify: `web/src/pages/ProjectDetailPage.tsx`

This is the most complex page — breadcrumb, search + tag filter, flag table with environment status indicators.

**Pattern for tables (used across multiple pages):**

```tsx
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'

<div className="rounded-lg border overflow-hidden">
  <Table>
    <TableHeader>
      <TableRow>
        <TableHead className="font-mono text-[11px] uppercase tracking-wider">Key</TableHead>
        ...
      </TableRow>
    </TableHeader>
    <TableBody>
      {filtered.map(flag => (
        <TableRow
          key={flag.id}
          className="cursor-pointer transition-colors hover:bg-[#d4956a]/8"
          onClick={() => navigate(`/projects/${key}/flags/${flag.key}`)}
        >
          <TableCell>
            <span className="font-mono text-xs text-[#d4956a]">{flag.key}</span>
          </TableCell>
          ...
        </TableRow>
      ))}
    </TableBody>
  </Table>
</div>
```

**Pattern for badges:**

```tsx
import { Badge } from '@/components/ui/badge'

<Badge variant="secondary" className="font-mono text-[11px]">{flag.flag_type}</Badge>
```

**Pattern for breadcrumb:**

```tsx
<div className="flex items-center gap-2 mb-6 text-[13px] text-muted-foreground">
  <Link to="/projects" className="text-muted-foreground hover:text-foreground transition-colors">Projects</Link>
  <span className="opacity-40">&rsaquo;</span>
  <span className="text-foreground font-mono text-xs">{key}</span>
</div>
```

**Step 1:** Migrate ProjectDetailPage — breadcrumb, search input, tag filter select, flag table, environment status dots, badges.

**Step 2: Commit**

```
refactor(web): migrate ProjectDetailPage to Tailwind + shadcn
```

---

### Task 13: Migrate FlagDetailPage

**Files:**
- Modify: `web/src/pages/FlagDetailPage.tsx`

Contains breadcrumb, flag metadata card, environment tabs, and the `ConfigEditor` inline component. The ConfigEditor uses RuleBuilder and VariantEditor (already migrated in Task 9).

**Pattern for tabs:**

```tsx
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'

<Tabs value={effectiveEnvKey} onValueChange={setSelectedEnvKey}>
  <TabsList>
    {environments.map(env => (
      <TabsTrigger key={env.key} value={env.key}>{env.name}</TabsTrigger>
    ))}
  </TabsList>
  {environments.map(env => (
    <TabsContent key={env.key} value={env.key}>
      <ConfigEditor ... />
    </TabsContent>
  ))}
</Tabs>
```

**Pattern for the toggle switch in ConfigEditor:**

```tsx
import { Switch } from '@/components/ui/switch'

<Switch checked={enabled} onCheckedChange={setEnabled} />
```

**Pattern for success/error alerts:**

```tsx
import { Alert, AlertDescription } from '@/components/ui/alert'

{saved && (
  <Alert className="mt-3 bg-green-500/8 border-green-500/25 text-green-400 animate-[fadeIn_200ms_ease]">
    <AlertDescription>Configuration saved successfully.</AlertDescription>
  </Alert>
)}
```

**Step 1:** Migrate the `ConfigEditor` inline component.

**Step 2:** Migrate the rest of `FlagDetailPage` (breadcrumb, metadata card, tabs).

**Step 3:** Verify the complete flag editing flow works.

**Step 4: Commit**

```
refactor(web): migrate FlagDetailPage to Tailwind + shadcn
```

---

### Task 14: Migrate table pages (EnvironmentsPage, SDKKeysPage, AuditLogPage)

**Files:**
- Modify: `web/src/pages/EnvironmentsPage.tsx`
- Modify: `web/src/pages/SDKKeysPage.tsx`
- Modify: `web/src/pages/AuditLogPage.tsx`

All three follow the same pattern: breadcrumb, page header with create button, table, inline create form.

**Step 1:** Migrate `EnvironmentsPage.tsx` — breadcrumb, table, inline create form.

**Step 2:** Migrate `SDKKeysPage.tsx` — breadcrumb, table, inline create form, copy/revoke buttons.

**Step 3:** Migrate `AuditLogPage.tsx` — breadcrumb, table, load more button.

**Step 4: Commit**

```
refactor(web): migrate table pages to Tailwind + shadcn
```

---

### Task 15: Migrate TeamPage and ProjectSettingsPage

**Files:**
- Modify: `web/src/pages/TeamPage.tsx`
- Modify: `web/src/pages/ProjectSettingsPage.tsx`

**TeamPage:** Three card sections (Your Account, Invite Team Member, Team Members table) + Pending Invites table. Use shadcn Card for sections.

**ProjectSettingsPage:** General settings card (name/description edit), Members placeholder card, Danger Zone card (project deletion with confirmation).

**Pattern for danger zone:**

```tsx
<Card className="border-destructive/25">
  <CardContent className="p-6">
    <h3 className="text-sm font-semibold text-destructive mb-3">Danger Zone</h3>
    ...
    <Button variant="destructive" onClick={() => setShowDeleteConfirm(true)}>
      Delete Project
    </Button>
  </CardContent>
</Card>
```

**Step 1:** Migrate `TeamPage.tsx`.

**Step 2:** Migrate `ProjectSettingsPage.tsx`.

**Step 3: Commit**

```
refactor(web): migrate TeamPage and ProjectSettingsPage to Tailwind + shadcn
```

---

### Task 16: Cleanup — delete theme.ts and App.css

**Files:**
- Delete: `web/src/theme.ts`
- Delete: `web/src/App.css` (if not already deleted)
- Verify: No file imports `theme.ts` anymore

**Step 1: Verify no theme.ts imports remain**

```bash
cd web && grep -r "from.*theme" src/ --include="*.tsx" --include="*.ts"
```

Expected: No results.

**Step 2: Delete theme.ts**

```bash
rm web/src/theme.ts
```

**Step 3: Verify build succeeds**

```bash
cd web && npm run build
```

Expected: Build succeeds with no errors.

**Step 4: Commit**

```
refactor(web): remove theme.ts and App.css after Tailwind migration
```

---

### Task 17: Lint and final verification

**Step 1: Run ESLint**

```bash
cd web && npm run lint
```

Fix any lint errors.

**Step 2: Run TypeScript check**

```bash
cd web && npx tsc --noEmit
```

Fix any type errors.

**Step 3: Build for production**

```bash
cd web && npm run build
```

Expected: Clean build, output in `web/dist/`.

**Step 4: Commit any lint/type fixes**

```
fix(web): resolve lint and type errors after Tailwind migration
```

---

## Accent Color Reference

The existing `#d4956a` amber/copper accent is used extensively. In Tailwind, use `text-[#d4956a]`, `bg-[#d4956a]`, `border-[#d4956a]/25`, etc. This is intentionally kept as an arbitrary value rather than overriding shadcn's `--accent` variable, because shadcn's `accent` is used for hover backgrounds on menu items, not for brand color.

## Key Tailwind Class Mappings

| Old theme token | Tailwind class |
|---|---|
| `t.bgBase` (#09090b) | `bg-background` |
| `t.bgSurface` (#111114) | `bg-card` |
| `t.bgElevated` (#1a1a1f) | `bg-muted` |
| `t.bgInput` (#111117) | `bg-input` |
| `t.border` (white/6%) | `border` (uses `--border` variable) |
| `t.textPrimary` (#e4e4e8) | `text-foreground` |
| `t.textSecondary` (#85858f) | `text-muted-foreground` |
| `t.textMuted` (#4c4c56) | `text-muted-foreground/60` |
| `t.accent` (#d4956a) | `text-[#d4956a]` |
| `t.success` (#3dd68c) | `text-green-400` |
| `t.danger` (#f27474) | `text-destructive` |
| `t.radiusSm` (6) | `rounded-sm` |
| `t.radiusMd` (8) | `rounded-md` |
| `t.radiusLg` (12) | `rounded-lg` |
| `t.radiusXl` (16) | `rounded-xl` |
| `t.fontSans` | `font-sans` |
| `t.fontMono` | `font-mono` |
